# BUILD-TIME ERRORS
# These errors cause the build to fail (prod) or warn (dev).
# Copy this file to lowdefy.yaml and uncomment one error at a time to test.

lowdefy: local

# ============================================================
# SECTION A: CONNECTION ERRORS
# ============================================================

# A1: Invalid connection type
# Uncomment to test: Connection type "NonExistentConnection" was used but is not defined
# ------------------------------------------------------------
# connections:
#   - id: invalidConnection
#     type: NonExistentConnection
#     properties:
#       url: http://example.com

# A2: Missing connection id
# Uncomment to test: Connection id missing
# ------------------------------------------------------------
# connections:
#   - type: AxiosHttp
#     properties:
#       baseURL: http://example.com

# A3: Duplicate connection id
# Uncomment to test: Duplicate connectionId "testApi"
# ------------------------------------------------------------
# connections:
#   - id: testApi
#     type: AxiosHttp
#     properties:
#       baseURL: http://example.com
#   - id: testApi
#     type: AxiosHttp
#     properties:
#       baseURL: http://other.com

# ============================================================
# SECTION B: AUTH ERRORS
# ============================================================

# B1: Auth config not an object
# Uncomment to test: lowdefy.auth is not an object
# ------------------------------------------------------------
# auth: invalid_string

# B2: Auth provider missing id
# Uncomment to test: Auth provider id missing
# ------------------------------------------------------------
# auth:
#   providers:
#     - type: GoogleProvider

# B3: Public/protected mutual exclusivity
# Uncomment to test: Protected and public pages are mutually exclusive
# ------------------------------------------------------------
# auth:
#   pages:
#     public:
#       - home
#     protected:
#       - dashboard

# ============================================================
# SECTION C: MENU ERRORS
# ============================================================

# C1: Duplicate menu id
# Uncomment to test: Duplicate menuId "default"
# ------------------------------------------------------------
# menus:
#   - id: default
#     links:
#       - id: home
#         pageId: home
#   - id: default
#     links:
#       - id: about
#         pageId: about

# C2: Menu link to non-existent page (warning)
# Uncomment to test: Page "nonExistentPage" referenced in menu link not found
# ------------------------------------------------------------
# menus:
#   - id: default
#     links:
#       - id: badLink
#         pageId: nonExistentPage

# ============================================================
# SECTION D: PAGE/BLOCK STRUCTURE ERRORS
# ============================================================

pages:
  # D1: Duplicate page id
  # Uncomment second page to test: Duplicate pageId "home"
  # ----------------------------------------------------------
  - id: home
    type: Box
    blocks:
      - id: header
        type: Title
        properties:
          content: Build Error Test Page

      # ========================================================
      # SECTION E: BLOCK ERRORS
      # ========================================================

      # E1: Invalid action type
      # Uncomment to test: Action type "NonExistentAction" was used but is not defined
      # --------------------------------------------------------
      # - id: invalidActionButton
      #   type: Button
      #   properties:
      #     title: Invalid Action Type
      #   events:
      #     onClick:
      #       - id: invalidAction
      #         type: NonExistentAction
      #         params:
      #           value: test

      # E2: Invalid block type
      # Uncomment to test: Block type "NonExistentBlockType" was used but is not defined
      # --------------------------------------------------------
      # - id: invalidBlock
      #   type: NonExistentBlockType
      #   properties:
      #     content: This block type does not exist

      # E3: Missing block id
      # Uncomment to test: Block id missing at page "home"
      # --------------------------------------------------------
      # - type: Button
      #   properties:
      #     title: No ID

      # E4: Block id not a string
      # Uncomment to test: Block id is not a string at page "home"
      # --------------------------------------------------------
      # - id: 123
      #   type: Button
      #   properties:
      #     title: Invalid ID type

      # E5: Block type not a string
      # Uncomment to test: Block type is not a string at "[blockId]" on page "home"
      # --------------------------------------------------------
      # - id: badType
      #   type:
      #     invalid: object
      #   properties:
      #     title: Type is object

      # ========================================================
      # SECTION F: REQUEST ERRORS
      # ========================================================

      # F1: Invalid request reference in action
      # Uncomment to test: Request "nonExistentRequest" not defined on page "home"
      # --------------------------------------------------------
      # - id: requestButton
      #   type: Button
      #   properties:
      #     title: Call Invalid Request
      #   events:
      #     onClick:
      #       - id: callRequest
      #         type: Request
      #         params: nonExistentRequest

      # F2: Request with missing id
      # Uncomment to test: Request id missing at page "home"
      # --------------------------------------------------------
      # - id: requestBlock
      #   type: Button
      #   properties:
      #     title: Block with bad request
      #   requests:
      #     - type: AxiosHttp
      #       connectionId: testApi
      #       properties:
      #         url: /test

      # F3: Duplicate request id
      # Uncomment to test: Duplicate requestId "myRequest" on page "home"
      # --------------------------------------------------------
      # - id: requestBlock
      #   type: Button
      #   properties:
      #     title: Block with duplicate requests
      #   requests:
      #     - id: myRequest
      #       type: AxiosHttp
      #       connectionId: testApi
      #       properties:
      #         url: /test1
      #     - id: myRequest
      #       type: AxiosHttp
      #       connectionId: testApi
      #       properties:
      #         url: /test2

      # F4: Request id with period
      # Uncomment to test: Request id "my.request" should not include a period
      # --------------------------------------------------------
      # - id: requestBlock
      #   type: Button
      #   properties:
      #     title: Block with bad request id
      #   requests:
      #     - id: my.request
      #       type: AxiosHttp
      #       connectionId: testApi
      #       properties:
      #         url: /test

      # F5: Invalid request type
      # Uncomment to test: Request type "NonExistentRequestType" was used but is not defined
      # --------------------------------------------------------
      # - id: requestBlock
      #   type: Button
      #   properties:
      #     title: Block with invalid request type
      #   requests:
      #     - id: badRequest
      #       type: NonExistentRequestType
      #       connectionId: testApi

      # F6: Request references non-existent connection
      # TODO: Validation not implemented - will fail at runtime, not build time
      # Uncomment to test: Connection "nonExistentConnection" not found
      # --------------------------------------------------------
      # - id: requestBlock
      #   type: Button
      #   properties:
      #     title: Block with non-existent connection
      #   requests:
      #     - id: badConnectionRequest
      #       type: AxiosHttp
      #       connectionId: nonExistentConnection
      #       properties:
      #         url: /test

      # ========================================================
      # SECTION G: ACTION/EVENT ERRORS
      # ========================================================

      # G1: Invalid page reference in Link
      # Uncomment to test: Page "nonExistentPage" not found
      # --------------------------------------------------------
      # - id: invalidLink
      #   type: Button
      #   properties:
      #     title: Go to Invalid Page
      #   events:
      #     onClick:
      #       - id: linkAction
      #         type: Link
      #         params:
      #           pageId: nonExistentPage

      # G2: Duplicate action id
      # Uncomment to test: Duplicate actionId "linkAction"
      # --------------------------------------------------------
      # - id: duplicateActions
      #   type: Button
      #   properties:
      #     title: Duplicate Actions
      #   events:
      #     onClick:
      #       - id: linkAction
      #         type: SetState
      #         params:
      #           key: value1
      #       - id: linkAction
      #         type: SetState
      #         params:
      #           key: value2

      # G3: Missing action id
      # Uncomment to test: Action id missing on event "onClick"
      # --------------------------------------------------------
      # - id: missingActionId
      #   type: Button
      #   properties:
      #     title: Missing Action ID
      #   events:
      #     onClick:
      #       - type: SetState
      #         params:
      #           key: value

      # G4: Action type not a string
      # Uncomment to test: Action type is not a string
      # --------------------------------------------------------
      # - id: badActionType
      #   type: Button
      #   properties:
      #     title: Bad Action Type
      #   events:
      #     onClick:
      #       - id: action1
      #         type:
      #           invalid: object
      #         params:
      #           key: value

      # ========================================================
      # SECTION H: OPERATOR ERRORS
      # ========================================================

      # H1: Invalid operator (typo)
      # Uncomment to test: Operator type "_staet" was used but is not defined
      # --------------------------------------------------------
      # - id: typoOperator
      #   type: Paragraph
      #   properties:
      #     content:
      #       _staet: someValue

      # H2: Another operator typo
      # Uncomment to test: Operator type "_iff" was used but is not defined
      # --------------------------------------------------------
      # - id: typoOperator2
      #   type: Paragraph
      #   properties:
      #     content:
      #       _iff:
      #         test: true
      #         then: yes
      #         else: no

      # ========================================================
      # SECTION I: FILE REFERENCE ERRORS
      # ========================================================

      # I1: Reference to non-existent file
      # Uncomment to test: Tried to reference file "nonexistent.yaml" but file does not exist
      # --------------------------------------------------------
      # - id: badRef
      #   type: Box
      #   blocks:
      #     _ref: nonexistent.yaml

      # ========================================================
      # Working block (keep this uncommented)
      # ========================================================
      - id: workingBlock
        type: Paragraph
        properties:
          content: Build succeeded! Uncomment an error section above to test build errors.

  # D1 continued: Duplicate page id
  # Uncomment to test: Duplicate pageId "home"
  # ----------------------------------------------------------
  # - id: home
  #   type: Box
  #   blocks:
  #     - id: duplicate
  #       type: Paragraph
  #       properties:
  #         content: Duplicate page
